<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>SASA — Inicio</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../CSS/style.css" />
</head>
<body>
  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <!-- Sidebar -->
  <aside id="profileMenu" class="profile-menu" aria-label="Menú de configuración" aria-hidden="true">
    <button class="close-btn" id="closeMenu" aria-label="Cerrar"><i class="fas fa-times"></i></button>
    <div class="menu-header no-avatar">
      <div class="menu-user">
        <h3 id="menuNombre">Usuario</h3>
        <p id="menuPase" class="muted">Cliente</p>
        <p class="muted small">ID: <span id="menuUserId">Desconocido</span></p>
      </div>
    </div>
    <nav class="menu-list">
      <a href="../MisVehiculos/Vehiculos.html"><i class="fa-solid fa-car"></i> Vehículos</a>
      <a href="../MisVehiculos/anadirVehiculo.html"><i class="fa-solid fa-plus-circle"></i> Añadir Vehículo</a>
      <a href="../Citas/citas.html"><i class="fa-regular fa-calendar-check"></i> Citas</a>
      <a href="../OrdenTrabajo/OrdenTrabajo.html"><i class="fa-solid fa-clipboard-list"></i> Órdenes de trabajo</a>
      <a href="../Facturas/facturas.html"><i class="fa-solid fa-receipt"></i> Facturas</a>
      <a href="../Ajustes/ajustes.html"><i class="fa-solid fa-sliders"></i> Ajustes</a>
      <a href="../Authenticator/login.html" id="logoutBtn" class="danger">
        <i class="fa-solid fa-arrow-right-from-bracket"></i> Cerrar sesión
      </a>
    </nav>
  </aside>

  <div class="app-shell">
    <header class="topbar">
      <div class="greeting">
        <h1 id="greetingText">Bienvenido</h1>
      </div>
      <button class="avatar" id="menuToggle" aria-label="Abrir configuración">
        <i class="fa-solid fa-circle-notch avatar-gear" aria-hidden="true"></i>
      </button>
    </header>

    <form class="searchbar" id="searchForm" action="./resultados.html" method="GET">
      <i class="fa-solid fa-magnifying-glass searchbar__icon"></i>
      <input id="searchInput" class="searchbar__input" type="search" name="q" placeholder="Buscar vehículos, citas..." />
      <button id="goSearch" class="searchbar__go" type="submit" aria-label="Buscar" title="Buscar">
        <i class="fa-solid fa-magnifying-glass"></i>
      </button>
    </form>

    <section class="section">
      <div class="section-head">
        <h2>Próximas Citas</h2>
        <a href="../Citas/citas.html" class="view-all">Ver todas</a>
      </div>

      <div class="chips" id="citasChips">
        <a href="#" class="chip chip-active" data-filter="hoy">Hoy</a>
        <a href="#" class="chip" data-filter="semana">Semana</a>
        <a href="#" class="chip" data-filter="todas">Todas</a>
      </div>

      <div id="citasHomeList" class="cards-scroll" aria-label="Carrusel de citas"></div>

      <template id="tplCitaCard">
        <article class="card card-hero">
          <div class="card-hero__img"></div>
          <div class="card-hero__overlay">
            <div class="pill"><i class="fa-regular fa-clock"></i><span>—</span></div>
            <div class="title">—</div>
            <div class="meta"><div class="cita-code">—</div></div>
          </div>
        </article>
      </template>
    </section>

    <section class="section">
      <div class="section-head">
        <h2>Mis Vehículos</h2>
        <a href="../MisVehiculos/Vehiculos.html" class="view-all">Ver todos</a>
      </div>

      <div id="listaVehiculosDashboard" class="stack"></div>

      <template id="tplVehiculoCard">
        <a class="card vehicle" href="../MisVehiculos/Vehiculos.html">
          <div class="vehicle__img"></div>
          <div class="vehicle__body">
            <h3 class="vehicle__name">—</h3>
            <p>Año: —</p>
            <p>Placa: —</p>
            <p>VIN: —</p>
          </div>
          <i class="fa-solid fa-chevron-right vehicle__chev"></i>
        </a>
      </template>
    </section>

    <nav class="tabbar">
      <a class="tabbar__btn active" href="./index.html"><i class="fa-solid fa-house"></i></a>
      <a class="tabbar__btn" href="../Citas/citas.html"><i class="fa-regular fa-calendar"></i></a>
      <a class="tabbar__btn" href="../MisVehiculos/Vehiculos.html"><i class="fa-solid fa-car"></i></a>
      <a class="tabbar__btn" href="../Ajustes/ajustes.html"><i class="fa-solid fa-user"></i></a>
    </nav>

    <a href="../MisVehiculos/anadirVehiculo.html" class="fab"><i class="fa-solid fa-plus"></i></a>
  </div>

  <script type="module" src="../JS/script.js"></script>
  <script>
    (() => {
      const form = document.getElementById('searchForm');
      const input = document.getElementById('searchInput');
      form?.addEventListener('submit', (e) => {
        const q = (input?.value || '').trim();
        if (!q) {
          e.preventDefault();
          input?.focus();
        } else {
          try { localStorage.setItem('lastSearch', q); } catch {}
        }
      });
      input?.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') form?.requestSubmit();
      });
    })();
  </script>
</body>
</html>
