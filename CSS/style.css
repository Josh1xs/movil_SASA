:root{
  --app-bg: #7c1c1c;     /* rojo suave (sin gradiente) */
  --brand: #7c1c1c;
  --brand-2: #8a2424;
  --ink: #121212;
  --text: #2a2a2a;
  --muted: #6d6d6d;
  --chip: #efefef;
  --white: #ffffff;
  --card: #fcfbf9;
  --shadow: 0 8px 24px rgba(0,0,0,.12);
  --radius-xl: 22px;
  --radius-lg: 18px;
  --radius-md: 14px;
}

/* Reset mínimo */
*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background: var(--app-bg);
}

/* Overlay + Sidebar */
.overlay{
  position: fixed; inset: 0; background: rgba(0,0,0,.35);
  opacity: 0; pointer-events: none; transition: opacity .2s ease; z-index: 20;
}
.overlay.show{ opacity: 1; pointer-events: auto; }
.profile-menu{
  position: fixed; top:0; right:0; height:100dvh; width:84%; max-width:360px;
  background:#141414; color:#f4f4f4; transform:translateX(100%);
  transition: transform .25s ease; box-shadow:-16px 0 40px rgba(0,0,0,.35);
  z-index:30; padding:18px 16px 24px;
}
.profile-menu.open{ transform: translateX(0); }
.close-btn{
  position:absolute; right:12px; top:12px; width:40px; height:40px;
  border:none; border-radius:12px; background:rgba(255,255,255,.08);
  color:#fff; display:grid; place-items:center;
}
.menu-header{ display:grid; grid-template-columns:56px 1fr; gap:12px; align-items:center; margin-top:8px; }
.menu-avatar{ width:56px; height:56px; border-radius:50%; object-fit:cover; }
.menu-user h3{ margin:0 0 4px; }
.muted{ color:#bdbdbd; margin:0; }
.small{ font-size:.85rem; }
.menu-list{ display:grid; gap:6px; margin-top:16px; }
.menu-list a{
  display:flex; align-items:center; gap:12px; padding:12px 10px; text-decoration:none;
  color:#f4f4f4; border-radius:12px;
}
.menu-list a:hover{ background:rgba(255,255,255,.06); }
.menu-list a.danger{ color:#ffd5d5; }

/* Shell */
.app-shell{
  max-width: 430px;
  min-height: 100dvh;
  margin: 0 auto;
  padding: 20px 18px 96px; /* espacio para tabbar */
}

/* Topbar */
.topbar{
  display:grid; grid-template-columns:1fr auto; align-items:center; gap:12px; margin-top:8px;
}
.greeting h1{ font-size:26px; line-height:1.1; margin:0 0 4px; color:#fff; }
.greeting p{ margin:0; color:#ffe5e5; font-weight:500; opacity:.9; }
.wave{ display:inline-block; transform-origin:70% 70%; animation:wave 2.4s ease-in-out infinite; }
@keyframes wave{ 0%,100%{transform:rotate(0)} 50%{transform:rotate(16deg)} }
.avatar{ width:44px; height:44px; border-radius:50%; outline:2px solid rgba(255,255,255,.25);
  overflow:hidden; display:inline-flex; background:#fff; border:none; }
.avatar img{ width:100%; height:100%; object-fit:cover; }

/* Search */
.search-wrap{ margin:16px 0 8px; }
.search{
  display:grid; grid-template-columns:24px 1fr 40px; align-items:center; gap:10px;
  background:var(--white); border-radius:999px; padding:12px 14px; box-shadow:var(--shadow);
}
.search i{ color:var(--muted); }
.search input{ border:none; outline:none; background:transparent; font-size:15px; color:var(--text); }
.filter-btn{ display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px;
  border-radius:999px; background:linear-gradient(180deg, var(--brand), var(--brand-2)); color:#fff; text-decoration:none; }

/* Secciones */
.section{ margin:22px 0; }
.section-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
.section h2{ color:#fff; font-size:20px; margin:0; }
.view-all{ color:#ffe5e5; text-decoration:none; font-weight:600; }

/* Chips */
.chips{ display:flex; gap:10px; margin:10px 0 14px; }
.chip{
  padding:8px 14px; font-weight:600; text-decoration:none; color:var(--text);
  background:var(--chip); border-radius:999px; transition:transform .15s ease;
}
.chip:hover{ transform: translateY(-1px); }
.chip-active{ background:#ffecec; color:var(--brand); box-shadow:0 6px 18px rgba(124,28,28,.18); }

/* Cards scroll (citas) */
.cards-scroll{
  display:grid; grid-auto-flow:column; grid-auto-columns:82%;
  gap:14px; overflow-x:auto; padding-bottom:2px; scroll-snap-type:x mandatory;
}
.cards-scroll::-webkit-scrollbar{ height:6px; }
.cards-scroll::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.25); border-radius:999px; }

.card{ background:var(--card); border-radius:var(--radius-xl); box-shadow:var(--shadow);
  position:relative; overflow:hidden; text-decoration:none; color:inherit; }
.card-hero{ scroll-snap-align:start; }
.card-hero__img{ width:100%; height:210px; background:center/cover no-repeat; }
.card-hero__overlay{
  position:absolute; inset:auto 0 0 0; display:grid; gap:8px; padding:14px; color:#fff;
  background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.7) 70%, rgba(0,0,0,.9) 100%);
}
.card-hero .title{ font-size:18px; font-weight:700; }
.card-hero .meta{ display:flex; align-items:center; justify-content:space-between; gap:10px; font-weight:600; opacity:.95; }
.card-hero .meta i{ margin-right:6px; }
.card-hero .price{ margin-left:auto; background:rgba(255,255,255,.15); padding:6px 10px; border-radius:999px; }
.pill{ display:inline-flex; gap:8px; align-items:center; width:fit-content; padding:6px 10px; border-radius:999px;
  background:rgba(255,255,255,.14); backdrop-filter:blur(4px); font-weight:600; }
.fav{ position:absolute; right:12px; top:12px; width:38px; height:38px; border:none; border-radius:999px;
  display:grid; place-items:center; background:rgba(255,255,255,.85); color:var(--brand); box-shadow:var(--shadow); cursor:default; }

/* favoritos estado activo + pin visual */
.fav.is-active{ background:rgba(124,28,28,.95); color:#fff; }
.fav.is-active i{ font-weight:900; }
.card.is-pinned{ outline:2px solid rgba(124,28,28,.25); }

/* Lista vertical (vehículos) */
.stack{ display:grid; gap:14px; }
.vehicle{ display:grid; grid-template-columns:84px 1fr 18px; gap:12px; padding:12px; align-items:center; }
.vehicle__img{ width:84px; height:84px; border-radius:var(--radius-md); background:center/cover no-repeat; background-color:#e9e9e9; }
.vehicle__body p{ margin:2px 0; color:var(--muted); }
.vehicle__name{ margin:2px 0 6px; color:var(--ink); font-size:18px; }
.vehicle__chev{ color:var(--brand); }

/* Tabbar inferior */
.tabbar{
  position:fixed; left:50%; transform:translateX(-50%); bottom:16px;
  width:min(430px - 24px, calc(100% - 24px));
  background:linear-gradient(180deg, var(--brand), var(--brand-2));
  border-radius:24px; padding:12px 14px;
  display:grid; grid-template-columns:repeat(4,1fr); gap:6px; box-shadow:var(--shadow);
}
.tabbar__btn{ height:44px; display:grid; place-items:center; color:#f6f6f6; text-decoration:none; border-radius:14px; font-size:18px; }
.tabbar__btn.active{ background:rgba(255,255,255,.14); outline:1px solid rgba(255,255,255,.18); }

/* Focus accesible */
.card:focus-visible, .tabbar__btn:focus-visible, .chip:focus-visible, .filter-btn:focus-visible, .avatar:focus-visible{
  outline:3px solid #ffe2e2; outline-offset:2px;
}

/* Notch iOS */
@supports (padding: max(0px)){
  .tabbar{ padding-bottom:max(12px, env(safe-area-inset-bottom)); }
}

 .avatar{
      width: 44px; height: 44px; border-radius: 50%;
      display: grid; place-items: center;
      background: rgba(255,255,255,.15); color: #fff; border: none;
      outline: 2px solid rgba(255,255,255,.25);
    }
    .avatar-gear{ font-size: 20px; }
    .avatar.spin .avatar-gear{ animation: spin .6s linear; }
    @keyframes spin{ to{ transform: rotate(360deg); } }
    @media (prefers-reduced-motion: reduce){
      .avatar.spin .avatar-gear{ animation: none; }
    }
    /* Header de sección con dos acciones */
.section-head .actions{
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Botón "Añadir" alineado al estilo del index */
.add-link{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  font-weight: 700;
  text-decoration: none;
  color: #fff;
  background: linear-gradient(180deg, var(--brand), var(--brand-2));
  box-shadow: var(--shadow);
}

/* Tarjeta de estado vacío -> Añadir vehículo */
.vehicle.add-card{
  grid-template-columns: 64px 1fr 18px;
}

.add-icon{
  width: 64px; height: 64px;
  border-radius: 16px;
  display: grid; place-items: center;
  background: linear-gradient(180deg, var(--brand), var(--brand-2));
  color: #fff; font-size: 22px;
}

/* ---------- Floating Action Button (FAB) ---------- */
.fab{
  position: fixed;
  /* alineado al borde derecho del "app-shell" (máx 430px) o 16px en pantallas pequeñas */
  right: max(16px, calc(50% - 430px/2 + 16px));
  /* por encima de la tabbar: bottom = margen inferior + alto tabbar aprox + separación */
  bottom: calc(16px + 64px + 12px);
  width: 56px; height: 56px;
  border-radius: 50%;
  display: grid; place-items: center;
  background: linear-gradient(180deg, var(--brand), var(--brand-2));
  color: #fff; text-decoration: none;
  box-shadow: var(--shadow), 0 8px 20px rgba(0,0,0,.25);
  z-index: 40;
  transition: transform .15s ease, opacity .15s ease, box-shadow .2s ease;
}
.fab i{ font-size: 20px; }
.fab:hover{ box-shadow: var(--shadow), 0 12px 26px rgba(0,0,0,.30); }
.fab:active{ transform: scale(.96); }

/* Ocultar/mostrar al hacer scroll */
.fab-hide{
  opacity: 0; pointer-events: none; transform: translateY(10px);
}

/* Respetar safe-area en iOS */
@supports (padding: env(safe-area-inset-bottom)){
  .fab{
    bottom: calc(env(safe-area-inset-bottom) + 16px + 64px + 12px);
  }
}
.searchbar{ position:relative; display:flex; align-items:center; gap:8px; }
.searchbar__input{
  width:100%; height:48px; border-radius:16px; border:none; outline:0;
  padding:0 56px 0 44px; background:#fff; box-shadow:0 8px 18px rgba(0,0,0,.08);
}
.searchbar__icon{
  position:absolute; left:14px; color:#888; font-size:16px; pointer-events:none;
}

/* Botón lupa */
.searchbar__go{
  position:absolute; right:10px; top:50%; transform:translateY(-50%);
  width:40px; height:40px; border:none; border-radius:12px;
  background:linear-gradient(180deg,#7c1c1c,#8a2424); color:#fff;
  display:grid; place-items:center; cursor:pointer;
  box-shadow:0 6px 16px rgba(0,0,0,.18);
  transition:transform .08s ease, filter .2s ease;
}
.searchbar__go:hover{ filter:brightness(1.08); }
.searchbar__go:active{ transform:translateY(-48%); }
.searchbar__go i{ font-size:16px; }
